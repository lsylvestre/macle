circuit side_effect(a,r,u) = 
  r := !u + 1;
  a.(!r-!u)

;;;;

